<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Entraverse Admin &mdash; Tambah Produk</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/add-product.css">
</head>
<body>
  <main class="page">
    <header class="page__header">
      <h1 class="page__title">Tambah Produk</h1>
      <p class="page__subtitle">Isi informasi produk secara lengkap untuk menambahkannya ke katalog.</p>
    </header>

    <form id="add-product-form" class="form" novalidate>
      <section class="form-section">
        <h2 class="form-section__title">Informasi Produk</h2>
        <div class="grid grid--two-cols">
          <label class="field">
            <span class="field__label">Nama Produk <span class="field__required" aria-hidden="true">*</span></span>
            <input type="text" name="name" id="product-name" autocomplete="off" required>
          </label>
          <label class="field">
            <span class="field__label">Kategori <span class="field__required" aria-hidden="true">*</span></span>
            <select name="category" id="product-category" required>
              <option value="" disabled selected>Memuat kategori...</option>
            </select>
            <span class="field__hint" id="category-hint">Kategori diambil dari tabel Supabase.</span>
          </label>
        </div>
        <label class="field">
          <span class="field__label">Brand</span>
          <input type="text" name="brand" id="product-brand" autocomplete="off">
        </label>
        <label class="field">
          <span class="field__label">Deskripsi</span>
          <textarea name="description" id="product-description" rows="4" placeholder="Tuliskan deskripsi produk"></textarea>
        </label>
      </section>

      <section class="form-section">
        <h2 class="form-section__title">Foto Produk</h2>
        <div class="photo-list" id="current-photos" hidden aria-live="polite"></div>
        <div class="grid grid--five-cols" role="group" aria-labelledby="photo-group-label">
          <span id="photo-group-label" class="sr-only">Unggah hingga lima foto produk</span>
          <label class="photo-upload">
            <span class="photo-upload__text">Foto 1</span>
            <input type="file" accept="image/*" name="photo-0">
          </label>
          <label class="photo-upload">
            <span class="photo-upload__text">Foto 2</span>
            <input type="file" accept="image/*" name="photo-1">
          </label>
          <label class="photo-upload">
            <span class="photo-upload__text">Foto 3</span>
            <input type="file" accept="image/*" name="photo-2">
          </label>
          <label class="photo-upload">
            <span class="photo-upload__text">Foto 4</span>
            <input type="file" accept="image/*" name="photo-3">
          </label>
          <label class="photo-upload">
            <span class="photo-upload__text">Foto 5</span>
            <input type="file" accept="image/*" name="photo-4">
          </label>
        </div>
        <p class="field__hint">Anda dapat menambahkan hingga lima foto. Foto yang sudah tersimpan ditampilkan di atas.</p>
      </section>

      <section class="form-section">
        <h2 class="form-section__title">Trade-In</h2>
        <label class="switch">
          <input type="checkbox" id="trade-in-toggle" name="tradeIn">
          <span class="switch__label">Aktifkan program trade-in untuk produk ini</span>
        </label>
      </section>

      <section class="form-section">
        <h2 class="form-section__title">Perencanaan Stok</h2>
        <div class="grid grid--three-cols">
          <label class="field">
            <span class="field__label">Prediksi Stok Awal</span>
            <input type="number" inputmode="decimal" min="0" name="initialStockPrediction" id="initial-stock">
          </label>
          <label class="field">
            <span class="field__label">Rata-rata Penjualan / Hari</span>
            <input type="number" inputmode="decimal" min="0" step="0.01" name="dailyAverageSales" id="daily-sales">
          </label>
          <label class="field">
            <span class="field__label">Lead Time (hari)</span>
            <input type="number" inputmode="decimal" min="0" step="0.1" name="leadTime" id="lead-time">
          </label>
        </div>
        <div class="grid grid--three-cols">
          <label class="field">
            <span class="field__label">Reorder Point</span>
            <input type="number" inputmode="decimal" min="0" step="0.01" name="reorderPoint" id="reorder-point">
          </label>
          <label class="field">
            <span class="field__label">Berat (gram)</span>
            <input type="number" inputmode="decimal" min="0" step="0.01" name="weightGram" id="weight-gram">
          </label>
        </div>
        <div class="grid grid--three-cols">
          <label class="field">
            <span class="field__label">Panjang (cm)</span>
            <input type="number" inputmode="decimal" min="0" step="0.01" name="lengthCm" id="length-cm">
          </label>
          <label class="field">
            <span class="field__label">Lebar (cm)</span>
            <input type="number" inputmode="decimal" min="0" step="0.01" name="widthCm" id="width-cm">
          </label>
          <label class="field">
            <span class="field__label">Tinggi (cm)</span>
            <input type="number" inputmode="decimal" min="0" step="0.01" name="heightCm" id="height-cm">
          </label>
        </div>
        <label class="field field--readonly">
          <span class="field__label">Volume (CBM)</span>
          <input type="text" name="volumeCbm" id="volume-cbm" readonly>
        </label>
      </section>

      <section class="form-section">
        <h2 class="form-section__title">Tarif Pengiriman</h2>
        <div class="grid grid--two-cols">
          <label class="field">
            <span class="field__label">Ongkos Kirim - Laut (Rp per CBM)</span>
            <input type="number" inputmode="decimal" min="0" step="0.01" name="shippingSeaRate" id="shipping-sea">
          </label>
          <label class="field">
            <span class="field__label">Ongkos Kirim - Udara (Rp per Kg)</span>
            <input type="number" inputmode="decimal" min="0" step="0.01" name="shippingAirRate" id="shipping-air">
          </label>
        </div>
      </section>

      <section class="form-section">
        <div class="form-section__header">
          <h2 class="form-section__title">Varian Produk</h2>
          <button type="button" class="btn" id="add-variant-btn">+ Tambah Varian</button>
        </div>
        <div id="variant-list" class="variant-list" aria-live="polite"></div>
        <p class="field__hint">Isi nama varian dan daftar opsi yang tersedia (pisahkan dengan koma).</p>
      </section>

      <section class="form-section">
        <div class="form-section__header">
          <h2 class="form-section__title">Harga &amp; Inventori</h2>
          <button type="button" class="btn" id="add-pricing-row-btn">+ Tambah Baris Harga</button>
        </div>
        <div class="table-wrapper">
          <table class="table" id="pricing-table">
            <thead>
              <tr>
                <th>Varian</th>
                <th>Harga Beli</th>
                <th>Mata Uang</th>
                <th>Nilai Tukar</th>
                <th>Metode Kirim</th>
                <th>Biaya Kedatangan</th>
                <th>Harga Beli (Rp)</th>
                <th>Harga Offline</th>
                <th>Entraverse</th>
                <th>Tokopedia</th>
                <th>Shopee</th>
                <th>Stok</th>
                <th>Berat</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="pricing-body"></tbody>
          </table>
        </div>
      </section>

      <footer class="form__footer">
        <p class="form__status" role="status" aria-live="polite" hidden></p>
        <div class="form__actions">
          <a class="btn btn--ghost" href="dashboard.html">Batal</a>
          <button type="submit" class="btn btn--primary">Simpan Produk</button>
        </div>
      </footer>
    </form>
  </main>

  <script>
    window.addProductConfig = window.addProductConfig || {};
    window.addProductConfig.supabase = window.addProductConfig.supabase || {
      url: 'https://your-new-project.supabase.co',
      anonKey: 'your-public-anon-key'
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script type="module" src="assets/js/add-product.js"></script>
</body>
</html>
